"use strict"

var getErrMesg = function(ecode) {
	var mesg = require("./config")[ecode] || "未分类的错误";
	return {
		ecode: ecode,
		mesg: mesg
	};
};

var getHandleFunc = function(networkErr, parseBody){
	var handleServerResponse = function(e, httpResponse, body) {
		if (e || httpResponse.statusCode !== 200) {
			console.error("请求apiServer出错", e);
			networkErr(e || httpResponse.statusCode);
		} else {
			console.info("apiServer返回结果是", body);
			if (typeof body === "string") body = JSON.parse(body);
			parseBody(body);
		}
	};
	return handleServerResponse;
}




module.exports = {
	getErrMesg: getErrMesg,
	getHandleFunc: getHandleFunc	
}